PageBlocks.DragZone=function(e){this.view=e,PageBlocks.DragZone.superclass.constructor.call(this,e.getEl())},Ext.extend(PageBlocks.DragZone,Ext.dd.DragZone,{getDragData:function(e){var t=e.getTarget(this.view.itemSelector);if(!t)return!1;this.view.isSelected(t)||this.view.onClick(e);e=this.view.getSelectedNodes();return!(1<e.length)&&{nodes:e,ddel:t,single:!0}}}),PageBlocks.DropZone=function(e){this.view=e,PageBlocks.DropZone.superclass.constructor.call(this,e.getEl(),{containerScroll:!0})},Ext.extend(PageBlocks.DropZone,Ext.dd.DropZone,{getTargetFromEvent:function(e){return e.getTarget(this.view.itemSelector)},onNodeEnter:function(e){Ext.fly(e).addClass("x-view-selected")},onNodeOut:function(e){Ext.fly(e).removeClass("x-view-selected")},onNodeOver:function(e,t,o,n){return Ext.dd.DropZone.prototype.dropAllowed&&e!=n.nodes[0]},onNodeDrop:function(e,t,o,n){var r=this.view.getRecord(e),s=this.view.getRecord(n.nodes[0]);return s!=r&&(e=Ext.get(e),Ext.get(n.nodes[0]).insertBefore(e),this.view.fireEvent("sort",{target:r,source:s,event:o,dd:t}),!0)}});